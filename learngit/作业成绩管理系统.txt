#include<iostream>
#include<string>
using namespace std;
const int maxsize=100;
typedef struct S_Information* S_pointer;
typedef struct J_Information J_pointer;
typedef struct J_grade* G_pointer;
typedef S_pointer lklist;
struct S_Information
{
	int S_no;
	string S_name;
	S_pointer next;
};
struct J_Information
{
	int J_no;
	string J_content;
	G_pointer grade; 
};
struct J_grade
{
	int S_no;
	int S_grade;
	G_pointer next;
};
void Add_S_Information(lklist head);
void View_S_Information(lklist head);
lklist Change_S_Information(lklist head);
void Create_Job(lklist head);
lklist S_I_1=new S_Information;
J_pointer Jobs[maxsize];
S_pointer rear;
int Job_No=0;
void main(){
	int C_num;
	int T_User();
	int S_User();
	S_I_1->next=NULL;
	rear=S_I_1;
	while(true)
	{
		cout<<"请选择用户权限（输入权限编号）"<<endl;
		cout<<"1、教师权限"<<endl;
		cout<<"2、学生权限"<<endl;
		cout<<"0、退出"<<endl;
		cout<<"（教师权限编号：1	学生权限编号：2	     退出编号：0）"<<endl;
		cin>>C_num;
		switch(C_num)
		{
			case 1:T_User();break;
			case 2:S_User();break;
			case 0:exit(0);break;
			default:cout<<"请输入正确的用户编号！"<<endl;break;	
		}
	}
}
int T_User()
{
	string password;
	int C_num;
	int J_I_Control();
	int S_I_Control();
	while(true)
	{
		cout<<"请输入教师频道登录密码：";
		cin>>password;
		if(password=="123456")//教师登录密码可进一步延伸
		{
			while(true)
			{
				cout<<"欢迎进入教师频道！！！"<<endl;
				cout<<"1、学生信息管理"<<endl;
				cout<<"2、作业信息管理"<<endl;
				cout<<"3、返回"<<endl;
				cout<<"0、退出"<<endl;
				cout<<"请选择您要进行的操作（输入权限编号）"<<endl;
				cin>>C_num;
				switch(C_num)
				{
					case 1:S_I_Control();break;
					case 2:J_I_Control();break;
					case 3:return 1;
					case 0:exit(0);break;
					default:cout<<"请输入正确的用户编号！"<<endl;break;
				}
			}
		}
		else 
			cout<<"密码错误，请重试！！！"<<endl;
	}
}
int S_User()
{
	cout<<"欢迎进入学生频道！！！"<<endl;
	int C_num;
	while(true)
	{
		cout<<"1、查看所有作业成绩"<<endl;
		cout<<"2、查找作业成绩"<<endl;
		cout<<"3、统计作业成绩"<<endl;
		cout<<"4、返回"<<endl;
		cout<<"0、退出"<<endl;
		cout<<"请选择您要进行的操作（输入权限编号）"<<endl;
		cin>>C_num;
		switch(C_num)
		{
			case 1:break;
			case 2:break;
			case 3:break;
			case 4:return 1;
			case 0:exit(0);break;
			default:cout<<"请输入正确的用户编号！"<<endl;break;
		}
	}
}
int J_I_Control()
{
	int J_num;
	while(true)
	{
		cout<<"1、创建作业"<<endl;
		cout<<"2、录入作业成绩"<<endl;
		cout<<"3、修改作业成绩"<<endl;
		cout<<"4、查看作业成绩"<<endl;
		cout<<"5、统计作业"<<endl;
		cout<<"6、删除作业"<<endl;
		cout<<"7、返回"<<endl;
		cout<<"0、退出"<<endl;
		cout<<"请选择您要进行的操作（输入权限编号）"<<endl;
		cin>>J_num;
		switch(J_num)
		{
			case 1:Create_Job(S_I_1);break;
			case 2:break;
			case 3:break;
			case 4:break;
			case 5:break;
			case 6:break;
			case 7:return 1;
			case 0:exit(0);break;
			default:cout<<"请输入正确的用户编号！"<<endl;break;
		}
	}
}
int S_I_Control()
{
	int S_num;
	while(true)
	{
		cout<<"1、添加学生信息"<<endl;
		cout<<"2、查看学生信息"<<endl;
		cout<<"3、修改学生信息"<<endl;
		cout<<"4、删除学生信息"<<endl;
		cout<<"5、返回"<<endl;
		cout<<"0、退出"<<endl;
		cout<<"请选择您要进行的操作（输入权限编号）"<<endl;
		cin>>S_num;
		switch(S_num)
		{
			case 1:Add_S_Information(S_I_1);break;
			case 2:if(S_I_1->next==NULL)
					   cout<<"暂无学生信息，请先添加学生信息"<<endl;
				   else
					   View_S_Information(S_I_1);
					break;
			case 3:S_I_1=Change_S_Information(S_I_1);break;
			case 4:break;
			case 5:return 1;
			case 0:exit(0);break;
			default:cout<<"请输入正确的用户编号！"<<endl;break;
		}
	}
}
void Add_S_Information(lklist head)
{
	S_pointer s;
	int no,num;
	string name;
	while(true)
	{
		cout<<"请输入学生学号："<<endl;
		cin>>no;
		cout<<"请输入学生姓名："<<endl;
		cin>>name;
		s=new S_Information;
		s->S_no=no;
		s->S_name=name;	
		rear->next=s;
		rear=s;
		cout<<"是否继续添加（输入0继续添加，输入任意健返回菜单）"<<endl;
		cin>>num;
		if(num!=0)
			break;
	}

	rear->next=head;

}
void View_S_Information(lklist head)
{
	S_pointer p;
	p=head->next;
	cout<<"学号      姓名"<<endl;
	while(p!=head)
	{
		cout<<p->S_no<<" "<<p->S_name<<endl;
		p=p->next;
	}
}
lklist Change_S_Information(lklist head)
{
	S_pointer p,q;
	int no,C_no,num,num1=0;
	string C_name;
	p=head->next;
	q=head->next;
	while(true)
	{
		cout<<"请输入需要修改的学生学号"<<endl;
		cin>>no;
		while(p!=head)
		{
			if(p->S_no==no)
			{
				cout<<p->S_no<<" "<<p->S_name<<endl;
				num1=1;
			}
			p=p->next;
		}
		p=p->next;
		if(num1==0)
			cout<<"没有该学生信息，请确认后重新输入"<<endl;
		else
			break;
	}
	while(true)
	{
		cout<<"请选择你要修改的信息（输入数字编号）"<<endl;
		cout<<"1、学号"<<endl;
		cout<<"2、姓名"<<endl;
		cin>>num;
		if(num==1)
		{
			cout<<"请输入该学生的新学号"<<endl;
			cin>>C_no;
			while(q!=head)
			{
				if(q->S_no==no)
				{
					q->S_no=C_no;
					cout<<"修改后的学生信息为："<<endl;
					cout<<q->S_no<<" "<<q->S_name<<endl;
				}
				q=q->next;
			}
			break;
		}
		else if(num==2)
		{
			cout<<"请输入该学生的新姓名"<<endl;
			cin>>C_name;
			while(q!=head)
			{
				if(q->S_no==no)
				{
					q->S_name=C_name;
					cout<<"修改后的学生信息为："<<endl;
					cout<<q->S_no<<" "<<q->S_name<<endl;
				}
				q=q->next;
			}
			break;
		}
		else
			cout<<"编号无效，请重试！"<<endl;
	}
	return q;
}
void Delete_S_Information(lklist head)
{

} 
void Create_Job(lklist head)
{
	string Job_content;
	S_pointer p;
	G_pointer s,rear1,q;
	int num;
	p=head->next;
	while(true)
	{
		cout<<"请输入作业内容："<<endl;
		cin>>Job_content;
		Jobs[Job_No].grade=new J_grade;
		Jobs[Job_No].grade->next=NULL;
		rear1=Jobs[Job_No].grade;
		Jobs[Job_No].J_no=Job_No+1;
		Jobs[Job_No].J_content=Job_content;
		while(p!=head)
		{
			s=new J_grade;
			s->S_no=p->S_no;
			rear1->next=s;
			rear1=s;
			p=p->next;
		}
		rear1->next=Jobs[Job_No].grade;
		q=Jobs[Job_No].grade->next;
		while(q!=Jobs[Job_No].grade)
		{
			cout<<q->S_no<<"     "<<Jobs[Job_No].J_content<<endl;
			q=q->next;
		}
		Job_No++;
		cout<<"是否继续添加（输入0继续添加，输入任意健返回菜单）"<<endl;
		cin>>num;
		if(num!=0)
			break;
	}
}
void In_J_Grade()
{

}
void Change_J_Grade()
{

}
void View_J_Grade()
{

}